using Magic.IndexedDb;
using Magic.IndexedDb.Helpers;
using Microsoft.AspNetCore.Components.Rendering;
using Microsoft.AspNetCore.Components;

namespace E2eTestWebApp.TestPages;

[Route("/OpenTest")]
public class OpenTestPage(IMagicDbFactory magic) : TestPageBase
{
    public async Task<string> DirectOpen()
    {
        _ = await magic.OpenAsync(new DbStore()
        {
            Name = "OpenTest.DirectOpen",
            Version = "1",
            StoreSchemas = []
        });
        return "OK";
    }

    public async Task<string> RegisteredOpen1()
    {
        _ = await magic.GetRegisteredAsync("OpenTest.RegisteredOpen1");
        return "OK";
    }

    public async Task<string> RegisteredOpen2()
    {
        _ = await magic.GetRegisteredAsync("OpenTest.RegisteredOpen2");
        return "OK";
    }
}